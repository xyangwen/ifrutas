<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>iFrutas - Delivery de Frutas e Lanches</title>
    
    <link rel="icon" href="https://static.vecteezy.com/system/resources/previews/036/131/589/non_2x/fruit-or-vegetable-logo-illustration-vector.jpg">
    <meta property="og:image" content="https://static.vecteezy.com/system/resources/previews/036/131/589/non_2x/fruit-or-vegetable-logo-illustration-vector.jpg">
    <meta property="og:title" content="iFrutas & Lanches - Delivery R√°pido">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ea1d2c;
            --primary-dark: #b60f1b;
            --bg: #f7f7f7;
            --text: #3e3e3e;
            --text-light: #717171;
            --white: #ffffff;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --radius: 12px;
            --success: #50a773;
            --transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { background-color: var(--bg); color: var(--text); padding-bottom: 90px; }

        /* --- Animations --- */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { transform: scale(0.9); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* --- Header & Search --- */
        header {
            background: var(--white);
            padding: 15px 20px;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }

        .location-bar { cursor: pointer; display: flex; flex-direction: column; flex: 1; transition: var(--transition); }
        .location-bar:active { opacity: 0.6; }
        .location-label { font-size: 0.7rem; color: var(--primary); font-weight: bold; text-transform: uppercase; }
        .location-address { font-weight: 700; font-size: 0.85rem; display: flex; align-items: center; gap: 5px; color: var(--text); }

        .search-container { position: relative; width: 100%; }
        .search-input { 
            width: 100%; padding: 12px 15px 12px 40px; border-radius: 25px; 
            border: 1px solid #eee; background: #f4f4f4; outline: none; font-size: 0.9rem;
            transition: var(--transition);
        }
        .search-input:focus { border-color: var(--primary); background: #fff; box-shadow: 0 0 0 3px rgba(234, 29, 44, 0.1); }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #888; }

        .app-title {
            color: var(--primary); font-weight: 900; font-size: 1.5rem; text-align: center;
            margin: 15px 0; letter-spacing: -1px; animation: fadeIn 0.5s ease;
        }

        /* --- Categorias --- */
        .category-bar {
            display: flex; gap: 10px; overflow-x: auto; padding: 5px 20px 15px;
            -webkit-overflow-scrolling: touch; scrollbar-width: none;
        }
        .category-bar::-webkit-scrollbar { display: none; }
        
        .cat-btn {
            background: #fff; border: 1px solid #eee; padding: 8px 16px; border-radius: 20px;
            font-size: 0.9rem; font-weight: 500; color: var(--text-light); white-space: nowrap;
            cursor: pointer; transition: var(--transition); box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .cat-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 4px 8px rgba(234, 29, 44, 0.2); }

        /* --- Cat√°logo --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 10px; }
        h2 { font-size: 1.1rem; margin: 10px 0 15px; font-weight: 700; display: flex; justify-content: space-between; }

        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; animation: fadeIn 0.6s ease; }
        @media(min-width: 768px) { .product-grid { grid-template-columns: repeat(4, 1fr); } }

        .product-card {
            background: var(--white); border-radius: var(--radius); box-shadow: var(--shadow);
            overflow: hidden; cursor: pointer; position: relative;
            transition: var(--transition);
        }
        .product-card:active { transform: scale(0.96); }
        .product-card:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.15); }

        .promo-badge {
            position: absolute; top: 10px; left: 10px; background: var(--primary);
            color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; z-index: 5;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .time-badge {
            position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.95);
            color: #333; padding: 4px 8px; border-radius: 12px; font-size: 0.65rem; font-weight: bold; z-index: 5;
            display: flex; align-items: center; gap: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .product-img { width: 100%; height: 130px; object-fit: cover; }
        .product-info { padding: 10px; }
        .product-title { font-size: 0.85rem; font-weight: 500; height: 34px; overflow: hidden; margin-bottom: 5px; }
        
        .price-tag { display: flex; align-items: center; gap: 5px; }
        .old-price { text-decoration: line-through; color: #999; font-size: 0.75rem; }
        .current-price { color: var(--success); font-weight: 700; font-size: 0.95rem; }

        /* --- Avalia√ß√µes & Observa√ß√£o --- */
        .reviews-section { margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }
        .review-item { margin-bottom: 10px; background: #f9f9f9; padding: 10px; border-radius: 8px; font-size: 0.8rem; }
        .review-header { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .stars { color: #ffb100; }
        .review-user { font-weight: bold; }

        .obs-container { margin-top: 15px; background: #fff8f8; padding: 10px; border-radius: 8px; border: 1px dashed #ddd; }
        .obs-label { font-size: 0.8rem; font-weight: bold; color: #555; margin-bottom: 5px; display: block; }
        .obs-input { 
            width: 100%; border: 1px solid #eee; border-radius: 6px; padding: 8px; 
            font-size: 0.85rem; outline: none; background: #fff; resize: none;
        }

        /* --- Carrinho & Bot√µes --- */
        .cart-bar {
            position: fixed; bottom: 0; width: 100%; background: white; padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 -4px 20px rgba(0,0,0,0.1); z-index: 99;
            transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .cart-bar.visible { transform: translateY(0); }

        .cart-item-box { 
            border: 1px solid #eee; border-radius: 12px; padding: 12px; margin-bottom: 15px;
            background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.02); position: relative;
            animation: fadeIn 0.3s ease;
        }

        .btn-pay-item {
            width: 100%; background: var(--success); color: white; border: none;
            padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer;
            transition: var(--transition); box-shadow: 0 4px 6px rgba(80, 167, 115, 0.2);
        }
        .btn-pay-item:active { transform: scale(0.98); }

        /* --- Modais --- */
        .modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); z-index: 1000; 
            display: flex; align-items: flex-end;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .modal.active { opacity: 1; pointer-events: auto; }
        
        .modal-content { 
            background: var(--white); width: 100%; max-height: 90%; 
            border-radius: 20px 20px 0 0; padding: 25px 20px; overflow-y: auto; 
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        .modal.active .modal-content { transform: translateY(0); }

        /* Corre√ß√£o do Bot√£o Fechar */
        .close-btn { 
            position: absolute; top: 15px; right: 15px; z-index: 1001;
            font-size: 2rem; border: none; background: rgba(255,255,255,0.8); 
            width: 35px; height: 35px; border-radius: 50%;
            cursor: pointer; color: #333; line-height: 1; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Review Screen Specifics */
        .review-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f0f0f0; font-size: 0.9rem; }
        .review-row.total { border: none; font-weight: 900; font-size: 1.1rem; margin-top: 10px; color: var(--primary); }
        .review-obs { font-size: 0.8rem; color: #666; font-style: italic; background: #eee; padding: 8px; border-radius: 6px; margin-top: 5px; }

        .hidden { display: none !important; }

        /* Helper for address form */
        .form-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .form-group { width: 100%; margin-bottom: 10px; }
        .form-group label { display: block; font-size: 0.8rem; font-weight: bold; color: #555; margin-bottom: 5px; }
        .form-group input { width: 100%; background: white; border: 1px solid #ddd; padding: 12px; border-radius: 8px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <header>
        <div class="header-top">
            <div class="location-bar" onclick="openModal('address-modal')">
                <span class="location-label">Entregar agora em (35-45 min)</span>
                <span class="location-address" id="header-address">üìç Selecionar Endere√ßo</span>
            </div>
            <button onclick="openModal('history-modal')" style="background:none; border:none; font-size: 1.5rem; cursor:pointer; transition: transform 0.2s;">üìã</button>
        </div>
        <div class="search-container">
            <span class="search-icon">üîç</span>
            <input type="text" class="search-input" placeholder="Buscar no card√°pio..." onkeyup="filterProducts(this.value)">
        </div>
    </header>

    <div class="app-title">iFrutas & Lanches üçéüçî</div>

    <div class="category-bar">
        <button class="cat-btn active" onclick="setCategory('todos', this)">Todos</button>
        <button class="cat-btn" onclick="setCategory('frutas', this)">Frutas</button>
        <button class="cat-btn" onclick="setCategory('lanches', this)">Lanches</button>
        <button class="cat-btn" onclick="setCategory('bebidas', this)">Bebidas</button>
    </div>

    <main class="container">
        <h2 id="section-title">Destaques üìç</h2>
        <div class="product-grid" id="product-list"></div>
    </main>

    <div class="cart-bar" id="cart-bar">
        <div>
            <div style="display: flex; align-items: center; gap: 8px;">
                <span id="cart-count" style="background: var(--primary); color: white; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-size: 0.75rem; font-weight: bold;">0</span>
                <span style="font-weight: bold; font-size: 0.9rem;">Item(s) na sacola</span>
            </div>
            <span style="font-size: 0.7rem; color: #666;">Entrega estimada: 35-45 min</span>
        </div>
        <button class="btn-primary" onclick="openModal('cart-modal')" style="background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: bold; box-shadow: 0 4px 10px rgba(234, 29, 44, 0.3);">Ver Sacola</button>
    </div>

    <div class="modal" id="product-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('product-modal')">√ó</button>
            <div style="position: relative;">
                <img src="" id="modal-img" style="width: 100%; height: 220px; object-fit: cover; border-radius: 12px; margin-bottom: 15px;">
                <span class="time-badge" style="top: 10px; right: 10px; position: absolute;">üõµ 35-45 min</span>
            </div>
            <h3 id="modal-title" style="font-size: 1.3rem;"></h3>
            <div class="price-tag" style="margin: 10px 0;">
                <span id="modal-old-price" class="old-price"></span>
                <span id="modal-current-price" class="current-price" style="font-size: 1.4rem;"></span>
            </div>
            <p id="modal-desc" style="font-size: 0.9rem; color: #666; margin-bottom: 20px; line-height: 1.4;"></p>
            
            <div class="reviews-section">
                <h4 style="margin-bottom: 10px;">Avalia√ß√µes</h4>
                <div id="modal-reviews"></div>
            </div>

            <div class="obs-container">
                <label class="obs-label">üìù Alguma observa√ß√£o?</label>
                <textarea id="obs-input" class="obs-input" rows="2" placeholder="Ex: Sem cebola, gelo separado, fruta madura..."></textarea>
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px; align-items: center;">
                <div style="display: flex; align-items: center; gap: 15px; border: 1px solid #ddd; padding: 10px; border-radius: 8px;">
                    <button onclick="changeQty(-1)" style="border:none; background:none; font-size: 1.2rem; color: var(--primary); font-weight: bold;">-</button>
                    <span id="modal-qty" style="font-weight: bold;">1</span>
                    <button onclick="changeQty(1)" style="border:none; background:none; font-size: 1.2rem; color: var(--primary); font-weight: bold;">+</button>
                </div>
                <button onclick="addToCart()" style="flex: 1; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; box-shadow: 0 4px 10px rgba(234, 29, 44, 0.3);">Adicionar √† Sacola</button>
            </div>
        </div>
    </div>

    <div class="modal" id="cart-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('cart-modal')">√ó</button>
            <h3 style="margin-bottom: 5px; padding-right: 30px;">Sua Sacola üõí</h3>
            <p style="font-size: 0.8rem; color: #666; margin-bottom: 20px;">Revise seus itens antes de pagar.</p>
            <div id="cart-items-container"></div>
        </div>
    </div>

    <div class="modal" id="review-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('review-modal')">√ó</button>
            <h3 style="margin-bottom: 20px; color: var(--text); padding-right: 30px;">Resumo do Pedido üßæ</h3>
            
            <div style="background: #f9f9f9; padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                <div style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #ccc;">
                    <p style="font-size: 0.75rem; color: #888; text-transform: uppercase; font-weight: bold;">Entregar em:</p>
                    <p id="review-address" style="font-weight: bold; font-size: 0.95rem; display:flex; align-items:center; gap:5px;">üìç Carregando...</p>
                    <p id="review-name" style="font-size: 0.85rem; color: #555; margin-top: 3px;">üë§ Carregando...</p>
                    <p style="font-size: 0.8rem; color: var(--success); font-weight: bold; margin-top: 5px;">‚è±Ô∏è Entrega estimada: 35-45 min</p>
                </div>

                <div id="review-product-details">
                    </div>
            </div>

            <button onclick="finalizeReview()" style="width: 100%; background: var(--success); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1rem; box-shadow: 0 4px 10px rgba(80, 167, 115, 0.3);">‚úÖ Confirmar e Pagar</button>
        </div>
    </div>

    <div class="modal" id="history-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('history-modal')">√ó</button>
            <h3 style="margin-bottom: 20px; padding-right: 30px;">Meus Pedidos üìã</h3>
            <div id="history-container"></div>
        </div>
    </div>

    <div class="modal" id="address-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal('address-modal')">√ó</button>
            <h3 style="padding-right: 30px;">Onde entregamos? üè†</h3>
            <div style="margin-top: 20px;">
                <div class="form-group">
                    <label>Seu Nome</label>
                    <input type="text" id="user-name" placeholder="Ex: Jo√£o da Silva">
                </div>
                
                <div class="form-row">
                    <div class="form-group" style="flex: 3;">
                        <label>Rua</label>
                        <input type="text" id="addr-street" placeholder="Nome da Rua">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label>N√∫mero</label>
                        <input type="text" id="addr-num" placeholder="N¬∫">
                    </div>
                </div>

                <div class="form-group">
                    <label>Complemento <span style="font-weight:normal; color:#888;">(Opcional)</span></label>
                    <input type="text" id="addr-comp" placeholder="Ex: Apt 101, Fundos">
                </div>

                <div class="form-group">
                    <label>Ponto de Refer√™ncia <span style="font-weight:normal; color:#888;">(Opcional)</span></label>
                    <input type="text" id="addr-ref" placeholder="Ex: Ao lado da padaria">
                </div>

                <button onclick="saveAddress()" style="width: 100%; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: bold; margin-top: 10px;">Salvar Endere√ßo</button>
            </div>
        </div>
    </div>

    <div class="modal" id="checkout-modal">
        <div class="modal-content" style="text-align: center;">
            <button class="close-btn" onclick="closeModal('checkout-modal')">√ó</button>
            <h3 style="padding-right: 30px;">Finalizar Pagamento</h3>
            <p id="checkout-item-name" style="font-weight: bold; margin: 15px 0;"></p>
            
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Logo%E2%80%94pix_powered_by_Banco_Central_%28Brazil%2C_2020%29.svg/2560px-Logo%E2%80%94pix_powered_by_Banco_Central_%28Brazil%2C_2020%29.svg.png" width="80" style="margin-bottom: 10px;">
            <div style="background: #f4f4f4; padding: 15px; border-radius: 8px; margin-bottom: 15px; animation: popIn 0.5s ease;">
                <img id="checkout-qr" src="" style="width: 180px; height: 180px; margin-bottom: 10px;">
                <p style="font-size: 0.8rem; color: #666;">Pague e retorne para confirmar</p>
            </div>

            <button onclick="copyPix()" style="width: 100%; background: #333; color: white; border: none; padding: 12px; border-radius: 8px; margin-bottom: 10px; font-weight: bold;">üìã Copiar C√≥digo Pix</button>
            <a id="checkout-link" href="#" target="_blank" onclick="simulatePaymentStart()" style="display: block; width: 100%; background: #00d700; color: white; text-decoration: none; padding: 12px; border-radius: 8px; font-weight: bold;">üîó Abrir Link de Pagamento</a>
        </div>
    </div>

    <div id="loading-overlay" class="hidden" style="position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(234,29,44,0.95); z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;">
        <div style="width: 50px; height: 50px; border: 5px solid white; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <h3 style="margin-top: 20px;">Processando seu Pix...</h3>
    </div>

    <script>
        // --- DATA ---
        // Lista atualizada com novos produtos e categorias
        const products = [
            // FRUTAS
            {
                id: 1, category: 'frutas', name: "Jaca Dura Premium", price: 20.00, oldPrice: 25.00,
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRav5c9icx32NBrS6E--h_GOloEZH_vZcvOf4VTc_zLxEPDLGHzHbi3VOw&s=10",
                desc: "Jaca de √≥tima qualidade, gominhos crocantes e muito doces.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540520.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510JMyqeB0Mz630473B5",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693b9dab-a751-438b-9db5-871e056167c6",
                reviews: [{u: "Ricardo M.", s: 5, t: "Melhor jaca que j√° comi no Rio!"}, {u: "Ana P.", s: 4, t: "Muito boa, chegou bem geladinha."}]
            },
            {
                id: 2, category: 'frutas', name: "Jaca Mole Selecionada", price: 20.00, oldPrice: 28.00,
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSZDNoz0ZN-3wuE8PQPN8oG0WK7dPcbTiCJ3J0w7eFIQbMMgBOyIKLJDss&s=10",
                desc: "Textura cremosa, ideal para quem gosta de jaca bem madura.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540520.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510JMyqeB0Mz630473B5",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693b9dab-a751-438b-9db5-871e056167c6",
                reviews: [{u: "Marcos T.", s: 5, t: "Perfeita para comer de colher."}]
            },
            {
                id: 3, category: 'frutas', name: "Saco com 10 Mangas Espada", price: 5.00, oldPrice: 12.00, promo: "PROMO√á√ÉO",
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQmYk_HY_3VmSD04r2F-Z-I526sAD60xgNzngZJNQnvj-FgsphJ8aI28dE&s=10",
                desc: "Mangas espada selecionadas. Saco fechado com 10 unidades.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc552040000530398654045.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510JDQ3sb0SN8630497E5",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693baf36-28cb-4b93-97a6-d054b2d70ee3",
                reviews: [{u: "Carla S.", s: 5, t: "Pelo pre√ßo, a qualidade √© absurda!"}, {u: "Pedro J.", s: 5, t: "Docinhas demais."}]
            },
            {
                id: 4, category: 'frutas', name: "Saco com 20 Mangas Espada", price: 10.00, oldPrice: 20.00, promo: "MELHOR PRE√áO",
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTyA-o71zixhlPoztyYsnOp0qFhUggWxOUSZ2SE7iBqySzB73njOWh9kIw&s=10",
                desc: "Combo fam√≠lia com 20 mangas espada. Super doces.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510SdE6QFAylY63042B3C",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693bb002-4b9b-4a28-9323-7cde9e373115",
                reviews: [{u: "Joana G.", s: 5, t: "Valeu muito a pena, vieram todas perfeitas."}]
            },
            {
                id: 5, category: 'frutas', name: "Kit 2 Abacaxis P√©rola", price: 5.00, oldPrice: 10.00, promo: "2 POR 5",
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJVQgq5FCLAQ7Ta4G2Qw9yVOljcMJM1wkHZCYhVxrq5GmKCtYhdyKAjWU&s=10",
                desc: "Abacaxi P√©rola bem maduro e doce. Direto do produtor.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc552040000530398654045.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510JDQ3sb0SN8630497E5",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693baf36-28cb-4b93-97a6-d054b2d70ee3",
                reviews: [{u: "Felipe L.", s: 5, t: "Melhor abacaxi da regi√£o!"}]
            },
            {
                id: 6, category: 'frutas', name: "Combo 5 Abacaxis P√©rola", price: 10.00, oldPrice: 25.00, promo: "OFERTA",
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJVQgq5FCLAQ7Ta4G2Qw9yVOljcMJM1wkHZCYhVxrq5GmKCtYhdyKAjWU&s=10",
                desc: "Ideal para sucos e sobremesas. 5 unidades grandes.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510SdE6QFAylY63042B3C",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693bb002-4b9b-4a28-9323-7cde9e373115",
                reviews: [{u: "Beatriz R.", s: 4, t: "Muito bom, entregador foi super atencioso."}]
            },
            
            // LANCHES
            {
                id: 7, category: 'lanches', name: "Combo X-Tudo + Fritas + Coca", price: 8.99, oldPrice: 15.00, promo: "MAIS VENDIDO",
                img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZO1VBMUMHn9eGI9G_u_OdzAtgvmYepiyU48x95_2_MLdotMEGy7lSDh4&s=10",
                desc: "O Monstro: P√£o, Carne Artesanal, Queijo, Presunto, Bacon Crocante, Calabresa, Ovo, Milho, Batata Palha, Alface e Tomate. Acompanha Batata Frita e Coca Lata gelada.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc552040000530398654048.995802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510KODuWMhuda6304494D",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0d15-8123-490e-915d-226d2f82b169",
                reviews: [{u: "Carlos D.", s: 5, t: "Lanche gigante, muito bom!"}]
            },
            {
                id: 8, category: 'lanches', name: "Combo Fam√≠lia (4 X-Tudos)", price: 40.00, oldPrice: 60.00,
                img: "https://instadelivery-public.nyc3.cdn.digitaloceanspaces.com/itens/172748960266f76642a0ea3_75_75.jpeg",
                desc: "4 X-Tudos Completos + Batata turbinada com Cheddar e Bacon + Coca-Cola 2 Litros.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540540.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510FxoRw9aEOk63040AD5",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0f6a-99f0-4f0f-9cd1-8118770adf70",
                reviews: [{u: "Fam√≠lia Lima", s: 5, t: "Salvou o jantar de domingo."}]
            },
            {
                id: 9, category: 'lanches', name: "Combo Triplo (3 X-Tudos)", price: 30.00, oldPrice: 45.00,
                img: "https://i.pinimg.com/736x/6b/a4/06/6ba406cdd15435f89d298cc9fa317db7.jpg",
                desc: "3 X-Tudos Completos + Batata turbinada com Cheddar e Bacon + Coca-Cola 2 Litros.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540530.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510S1bYk1Ok4963045C15",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0f98-6e64-4b7e-b1b5-775ff29b248b",
                reviews: [{u: "Jorge P.", s: 5, t: "Pre√ßo imbat√≠vel."}]
            },

            // BEBIDAS
            {
                id: 10, category: 'bebidas', name: "Combo Gin Eternity Ma√ß√£ Verde", price: 10.00, oldPrice: 15.00,
                img: "https://http2.mlstatic.com/D_Q_NP_971287-MLU75603105313_042024-O.webp",
                desc: "Gin Eternity Sabor Ma√ß√£ Verde (Dose Generosa) + 4 Gelos de Coco/Sabor.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510aISwX31Svy63040057",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0fc3-43f7-4987-8014-66560fabd9da",
                reviews: [{u: "Ana Clara", s: 5, t: "Del√≠cia!"}]
            },
            {
                id: 11, category: 'bebidas', name: "Combo Gin Melancia 900ml", price: 10.00, oldPrice: 18.00,
                img: "https://carrefourbr.vtexassets.com/arquivos/ids/189722841/image-0.jpg?v=638796546367100000",
                desc: "Gin Eternity Melancia 900ml + Energ√©tico Baly 2L + 4 Gelos de Coco.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510aISwX31Svy63040057",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0fc3-43f7-4987-8014-66560fabd9da",
                reviews: []
            },
            {
                id: 12, category: 'bebidas', name: "Combo Gin Tropical 900ml", price: 10.00, oldPrice: 18.00,
                img: "https://carrefourbr.vtexassets.com/arquivos/ids/189725102/image-0.jpg?v=638796548560370000",
                desc: "Gin Eternity Tropical 900ml + Energ√©tico Baly 2L + 4 Gelos de Coco.",
                pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510aISwX31Svy63040057",
                pixLink: "https://nubank.com.br/cobrar/1ku07b/693f0fc3-43f7-4987-8014-66560fabd9da",
                reviews: []
            }
        ];

        // --- STATE ---
        let cart = [];
        let history = JSON.parse(localStorage.getItem('iFrutasHistory') || '[]');
        let currentProduct = null;
        let currentQty = 1;
        let isWaitingPayment = false;
        let activeCategory = 'todos'; // Controle de categoria

        // --- CORE FUNCTIONS ---
        function renderProducts(list = products) {
            const container = document.getElementById('product-list');
            
            // Filtra por categoria se n√£o estiver em "todos"
            let displayList = list;
            if (activeCategory !== 'todos' && list === products) {
                displayList = products.filter(p => p.category === activeCategory);
            }

            container.innerHTML = displayList.map(p => `
                <div class="product-card" onclick="openProduct(${p.id})">
                    ${p.promo ? `<div class="promo-badge">${p.promo}</div>` : ''}
                    <div class="time-badge">üïí 35-45 min</div>
                    <img src="${p.img}" class="product-img">
                    <div class="product-info">
                        <div class="product-title">${p.name}</div>
                        <div class="price-tag">
                            <span class="old-price">R$ ${p.oldPrice.toFixed(2)}</span>
                            <span class="current-price">R$ ${p.price.toFixed(2)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Nova fun√ß√£o para filtrar por categoria
        function setCategory(cat, btnElement) {
            activeCategory = cat;
            
            // Atualiza visual dos bot√µes
            document.querySelectorAll('.cat-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');
            
            // Re-renderiza
            renderProducts();
            
            // Atualiza t√≠tulo (Adicionado 'natal')
            const titles = { 'todos': 'Destaques üìç', 'natal': 'Especial de Natal üéÑ', 'frutas': 'Frutas Frescas üçé', 'lanches': 'Lanches & Combos üçî', 'bebidas': 'Bebidas Geladas üçπ' };
            document.getElementById('section-title').innerText = titles[cat];
        }

        function filterProducts(query) {
            // Se houver busca, ignoramos temporariamente a categoria para buscar em tudo
            if(query) {
                const filtered = products.filter(p => p.name.toLowerCase().includes(query.toLowerCase()));
                renderProducts(filtered);
                document.getElementById('section-title').innerText = `Resultados para "${query}"`;
            } else {
                renderProducts(); // Volta para a categoria atual
            }
        }

        function openProduct(id) {
            currentProduct = products.find(p => p.id === id);
            currentQty = 1;
            document.getElementById('modal-img').src = currentProduct.img;
            document.getElementById('modal-title').innerText = currentProduct.name;
            document.getElementById('modal-old-price').innerText = `R$ ${currentProduct.oldPrice.toFixed(2)}`;
            document.getElementById('modal-current-price').innerText = `R$ ${currentProduct.price.toFixed(2)}`;
            document.getElementById('modal-desc').innerText = currentProduct.desc;
            document.getElementById('modal-qty').innerText = currentQty;
            document.getElementById('obs-input').value = ""; 
            
            document.getElementById('modal-reviews').innerHTML = currentProduct.reviews.length ? currentProduct.reviews.map(r => `
                <div class="review-item">
                    <div class="review-header">
                        <span class="review-user">${r.u}</span>
                        <span class="stars">${'‚òÖ'.repeat(r.s)}</span>
                    </div>
                    <p style="color:#666; font-style:italic;">"${r.t}"</p>
                </div>
            `).join('') : '<p style="font-size:0.8rem; color:#999; font-style:italic;">Sem avalia√ß√µes ainda.</p>';

            openModal('product-modal');
        }

        function changeQty(delta) {
            currentQty = Math.max(1, currentQty + delta);
            document.getElementById('modal-qty').innerText = currentQty;
        }

        function addToCart() {
            const obs = document.getElementById('obs-input').value;
            cart.push({ ...currentProduct, qty: currentQty, cartId: Date.now(), obs: obs });
            updateCartUI();
            closeModal('product-modal');
        }

        function updateCartUI() {
            const count = cart.length;
            const cartBar = document.getElementById('cart-bar');
            
            if (count > 0) {
                cartBar.classList.remove('hidden');
                setTimeout(() => cartBar.classList.add('visible'), 10);
            } else {
                cartBar.classList.remove('visible');
                setTimeout(() => cartBar.classList.add('hidden'), 400);
            }

            document.getElementById('cart-count').innerText = count;

            const container = document.getElementById('cart-items-container');
            container.innerHTML = cart.map((item, idx) => `
                <div class="cart-item-box">
                    <div style="display:flex; justify-content:space-between;">
                        <strong>${item.qty}x ${item.name}</strong>
                        <span style="color:var(--success); font-weight:bold;">R$ ${(item.price * item.qty).toFixed(2)}</span>
                    </div>
                    ${item.obs ? `<p style="font-size:0.75rem; color:#666; margin-top:4px;">üìù Obs: ${item.obs}</p>` : ''}
                    <button class="btn-pay-item" onclick="openReviewModal(${idx})">Revisar e Pagar</button>
                    <button onclick="removeFromCart(${idx})" style="width:100%; background:none; border:none; color:#999; margin-top:8px; font-size:0.7rem; cursor:pointer;">Remover da sacola</button>
                </div>
            `).join('');
        }

        function removeFromCart(idx) {
            cart.splice(idx, 1);
            updateCartUI();
            if(cart.length === 0) closeModal('cart-modal');
        }

        // --- REVIEW & CHECKOUT LOGIC ---
        function openReviewModal(idx) {
            const item = cart[idx];
            currentProduct = item; // Para uso no checkout

            // Dados do Endere√ßo
            const savedAddr = localStorage.getItem('iFrutasAddr');
            const savedName = localStorage.getItem('iFrutasName') || "Cliente";

            if(!savedAddr) {
                alert("Por favor, adicione um endere√ßo antes de prosseguir.");
                closeModal('cart-modal');
                openModal('address-modal');
                return;
            }

            document.getElementById('review-address').innerHTML = `üìç ${savedAddr}`;
            document.getElementById('review-name').innerHTML = `üë§ ${savedName}`;
            
            // Detalhes do produto
            const total = item.price * item.qty;
            document.getElementById('review-product-details').innerHTML = `
                <div class="review-row">
                    <span>${item.qty}x ${item.name}</span>
                    <span>R$ ${total.toFixed(2)}</span>
                </div>
                ${item.obs ? `<div class="review-obs">" ${item.obs} "</div>` : ''}
                <div class="review-row total">
                    <span>Total a Pagar</span>
                    <span>R$ ${total.toFixed(2)}</span>
                </div>
            `;

            closeModal('cart-modal');
            openModal('review-modal');
        }

        function finalizeReview() {
            closeModal('review-modal');
            startCheckout();
        }

        function startCheckout() {
            const item = currentProduct;
            document.getElementById('checkout-item-name').innerText = `${item.qty}x ${item.name}`;
            document.getElementById('checkout-qr').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(item.pixCode)}`;
            document.getElementById('checkout-link').href = item.pixLink;
            
            openModal('checkout-modal');
        }

        function copyPix() {
            navigator.clipboard.writeText(currentProduct.pixCode);
            alert("C√≥digo copiado! Pague no seu banco.");
            simulatePaymentStart();
        }

        function simulatePaymentStart() {
            isWaitingPayment = true;
        }

        // Detectar quando o usu√°rio volta para a aba ap√≥s sair para pagar
        document.addEventListener("visibilitychange", () => {
            if (!document.hidden && isWaitingPayment) {
                confirmPayment();
            }
        });

        function confirmPayment() {
            isWaitingPayment = false;
            document.getElementById('loading-overlay').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('loading-overlay').classList.add('hidden');
                
                // Salva no hist√≥rico
                const order = {
                    id: Math.floor(Math.random() * 10000),
                    name: currentProduct.name,
                    date: new Date().toLocaleString(),
                    price: currentProduct.price * currentProduct.qty,
                    status: "Em Preparo üõµ"
                };
                history.unshift(order);
                localStorage.setItem('iFrutasHistory', JSON.stringify(history));

                // Remove do carrinho o item pago
                cart = cart.filter(i => i.cartId !== currentProduct.cartId);
                updateCartUI();
                
                closeModal('checkout-modal');
                // Pequeno delay para UX
                setTimeout(() => {
                    alert("Pagamento Confirmado! Seu pedido chegar√° em aprox. 40min.");
                    openModal('history-modal');
                    updateHistoryUI();
                }, 300);
            }, 3000);
        }

        function updateHistoryUI() {
            const container = document.getElementById('history-container');
            if(history.length === 0) {
                container.innerHTML = "<p style='text-align:center; color:#999; margin-top:20px;'>Voc√™ ainda n√£o fez pedidos.</p>";
                return;
            }
            container.innerHTML = history.map(h => `
                <div class="cart-item-box" style="border-left: 4px solid var(--primary); animation: fadeIn 0.4s ease;">
                    <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#888;">
                        <span>Pedido #${h.id}</span>
                        <span>${h.date}</span>
                    </div>
                    <p style="margin:5px 0; font-weight:bold;">${h.name}</p>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:5px;">
                        <span style="color:var(--success); font-weight:bold;">R$ ${h.price.toFixed(2)}</span>
                        <span style="background:#fff3f3; color:var(--primary); padding:3px 8px; border-radius:4px; font-size:0.7rem; font-weight:bold;">${h.status}</span>
                    </div>
                </div>
            `).join('');
        }

        // --- UTILS ---
        function openModal(id) { document.getElementById(id).classList.add('active'); if(id === 'history-modal') updateHistoryUI(); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        
        function saveAddress() {
            const name = document.getElementById('user-name').value;
            const street = document.getElementById('addr-street').value;
            const num = document.getElementById('addr-num').value;
            const comp = document.getElementById('addr-comp').value;
            const ref = document.getElementById('addr-ref').value;

            if(!name || !street || !num) return alert("Por favor, preencha Nome, Rua e N√∫mero.");

            let fullAddr = `${street}, ${num}`;
            if(comp) fullAddr += ` - ${comp}`;
            if(ref) fullAddr += ` (${ref})`;
            
            document.getElementById('header-address').innerText = `üìç ${street}, ${num}`;
            localStorage.setItem('iFrutasAddr', fullAddr);
            localStorage.setItem('iFrutasName', name);
            closeModal('address-modal');
        }

        // --- INIT ---
        window.onload = () => {
            renderProducts();
            const savedAddr = localStorage.getItem('iFrutasAddr');
            if(savedAddr) {
                document.getElementById('header-address').innerText = `üìç ${savedAddr.split(',')[0]}...`;
            }
            else {
                setTimeout(() => openModal('address-modal'), 1500);
            }
        };

        const style = document.createElement('style');
        style.innerHTML = `@keyframes spin { to { transform: rotate(360deg); } }`;
        document.head.appendChild(style);

    </script>
<script>
/* =======================
   ATUALIZA√á√ÉO DE PRODUTOS
   N√ÉO ALTERA O HTML ORIGINAL
======================= */

products.push(
    {
        id: 100,
        category: 'frutas',
        name: "Promo√ß√£o 3 Jacas",
        price: 40.00,
        oldPrice: 60.00,
        promo: "3 POR 40$",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4fv_saCzdj0k7GTV6eKASEzP-l0qXS7cVdgsRgtrZ2AHi-ySJiv1KLCSc&s=10",
        desc: "Promo√ß√£o especial: leve 3 jacas por apenas 40$.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540540.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510ILYQ9IVciH63047550",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695174a5-0db0-48fd-bb54-8fefa5fdf4f7",
        reviews: []
    },
    {
        id: 101,
        category: 'lanches',
        name: "Empad√£o de Frango",
        price: 35.00,
        oldPrice: 45.00,
        img: "https://static.itdg.com.br/images/360-240/26a490ee2068beb6e6fa8ae43effabfb/260974-original.jpg",
        desc: "Empad√£o de frango grande, bem recheado.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540535.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO621405103PqSmlFxxe630485A2",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/6951759a-6db8-4291-98ed-4669d0777173",
        reviews: []
    },
    {
        id: 102,
        category: 'lanches',
        name: "Empad√£o M√©dio",
        price: 15.00,
        oldPrice: 20.00,
        img: "https://facabonito.com.br/wp-content/uploads/2025/09/Empadao-De-Frango-Cremoso-Na-Marmita.webp",
        desc: "Empad√£o m√©dio de frango, ideal para uma refei√ß√£o r√°pida.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540515.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510sKJVWT8Z8Y63046DB8",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/6951763c-b1d0-4c5d-85e6-013abd07ff71",
        reviews: []
    },
    {
        id: 103,
        category: 'frutas',
        name: "Fruta P√£o",
        price: 5.00,
        oldPrice: 8.00,
        img: "https://cdn.awsli.com.br/600x700/2772/2772039/produto/375148700/fruta-p-o-1fqr789c5a.webp",
        desc: "Fruta p√£o fresca.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc552040000530398654045.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510Xp01dAL3Tk6304FE94",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695176f1-8395-4200-a1fa-559d75d4b82c",
        reviews: []
    },
    {
        id: 104,
        category: 'frutas',
        name: "3 Frutas P√£o",
        price: 10.00,
        oldPrice: 15.00,
        promo: "3 POR 10$",
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcROTJ96fKqwwtBdM2Em_mgXtY21Bj3h5BzzYzCO_45Qh1HgQDnjpZiWQ79x&s=10",
        desc: "Combo com 3 frutas p√£o.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540510.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510VxVwzeugsk63048871",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/69517736-9a11-487f-ba40-f7b3c3c5c213",
        reviews: []
    }
);

// Re-render autom√°tico
renderProducts();
</script>
<script>
/* ==========================================
   ATUALIZA√á√ÉO DE NOVOS PRODUTOS (FEIRA)
   Cole isso antes de fechar o </body>
   ========================================== */

products.push(
    {
        id: 105,
        category: 'frutas',
        name: "Tamarindo 1Kg",
        price: 15.00,
        oldPrice: 22.00,
        img: "https://previews.123rf.com/images/engdao/engdao1903/engdao190300958/118859167-ripe-of-tamarind-fruit-in-plastic-bag-package-for-sale-in-market-fresh-sweet-tamarinds-harvest.jpg",
        desc: "Tamarindo fresco e azedinho, pacote com 1kg.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540515.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510KDdywkA3ay6304578C",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695312af-d571-4a41-970c-b00177138784",
        reviews: []
    },
    {
        id: 106,
        category: 'frutas',
        name: "Ovo de Pato Verde (10 Unid)",
        price: 15.00,
        oldPrice: 20.00,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSCE9K5Dq8cRbXdmutU_sEe7Oeoy6tmF7KaiZDe3N5Nkg&s=10",
        desc: "Ovos de pato verde selecionados, caixa com 10 unidades.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540515.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO62140510KDdywkA3ay6304578C",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695312af-d571-4a41-970c-b00177138784",
        reviews: []
    },
    {
        id: 107,
        category: 'frutas',
        name: "Pitaya Vermelha (5 Unid)",
        price: 20.00,
        oldPrice: 35.00,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAcWrwJM74Kc4Vzn3U93wSHmxows3hAobPVp8HTSYAQg&s=10",
        desc: "Pitaya vermelha doce e suculenta. Kit com 5 unidades.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540520.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO621405108m8doNCzxo6304A7C6",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695313a2-48c4-44aa-8507-41160f75611c",
        reviews: []
    },
    {
        id: 108,
        category: 'frutas',
        name: "Pitaya Branca (5 Unid)",
        price: 20.00,
        oldPrice: 35.00,
        img: "https://diariodonordeste.verdesmares.com.br/image/contentid/policy:1.3159788:1636999897/Pitaya-amarela.jpg?f=default&$p$f=5ac7c7d",
        desc: "Pitaya de polpa branca. Kit com 5 unidades.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540520.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO621405108m8doNCzxo6304A7C6",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695313a2-48c4-44aa-8507-41160f75611c",
        reviews: []
    },
    {
        id: 109,
        category: 'frutas',
        name: "Lichia (1kg)",
        price: 20.00,
        oldPrice: 30.00,
        img: "https://s2-casaejardim.glbimg.com/iDr1oW7QpavGte2bAYHcxHmO8Kw=/0x0:1058x1062/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_a0b7e59562ef42049f4e191fe476fe7d/internal_photos/bs/2025/r/j/d4AT7NRyCZfuAoZgkzFw/lichia-com-caroco-a-mostra-toptropicals.com-wikimedia-.jpg",
        desc: "Lichia fresca, pacote com 1kg.",
        pixCode: "00020126580014BR.GOV.BCB.PIX01361c729f04-a046-4310-bdf5-1ead5d34bfc5520400005303986540520.005802BR5925Wendel dos Santos Oliveir6009SAO PAULO621405108m8doNCzxo6304A7C6",
        pixLink: "https://nubank.com.br/cobrar/1ku07b/695313a2-48c4-44aa-8507-41160f75611c",
        reviews: []
    }
);

// Atualiza a tela automaticamente
renderProducts();
</script>
<script>
/* =============================================================
   M√ìDULO DE DESTAQUES TIPO IFOOD (CARROSSEL)
   Adiciona banners deslizantes no topo da loja
   ============================================================= */

(function createBanners() {
    // 1. INJETAR O ESTILO CSS DOS BANNERS
    const style = document.createElement('style');
    style.innerHTML = `
        .banner-carousel {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px 0 20px 0; /* Espa√ßo para a sombra n√£o cortar */
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch; /* Rolagem suave no iOS */
            scrollbar-width: none; /* Esconde barra no Firefox */
        }
        .banner-carousel::-webkit-scrollbar { display: none; /* Esconde barra no Chrome */ }
        
        .banner-item {
            min-width: 85%; /* Ocupa 85% da tela para mostrar que tem mais ao lado */
            height: 150px;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            scroll-snap-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .banner-item:active { transform: scale(0.97); }
        
        .banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que a imagem preencha sem esticar */
        }

        /* Ajuste para telas maiores (PC) */
        @media(min-width: 768px) {
            .banner-item { min-width: 400px; }
        }
    `;
    document.head.appendChild(style);

    // 2. CRIAR O HTML DOS BANNERS
    const bannerContainer = document.createElement('div');
    bannerContainer.className = 'banner-carousel';

    // Lista de Banners
    const bannersData = [
        {
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ56Np7VgRBUCaw8oERsvJUog9r5U0g58-NFLD4IPsqQVJcSI-gikWcmiXY&s=10",
            action: "openProduct(7)", // Abre o Combo X-Tudo (ID 7)
            alt: "Oferta do Dia"
        },
        {
            img: "https://www.olimpiaminhacidade.com.br/uploads/images/2024/09/super-ofertas-do-hortifruti-proenca-supermercados-85bb2.png",
            action: "triggerCategory('frutas')", // Vai para Frutas
            alt: "Ofertas de Frutas"
        },
        {
            img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTo65FpdBAHbQ7mVRIBkG4m-33HtWCI5MMM0NGnyTIuj-c615gnCahlCsaT&s=10",
            action: "triggerCategory('lanches')", // Vai para Lanches
            alt: "Promo√ß√£o Empad√£o"
        }
    ];

    // Gerar o HTML de cada banner
    bannerContainer.innerHTML = bannersData.map(b => `
        <div class="banner-item" onclick="${b.action}">
            <img src="${b.img}" class="banner-img" alt="${b.alt}">
        </div>
    `).join('');

    // 3. INSERIR NO LOCAL CORRETO (Dentro do <main>, antes do t√≠tulo)
    const mainSection = document.querySelector('main.container');
    const titleSection = document.getElementById('section-title');
    
    if (mainSection && titleSection) {
        mainSection.insertBefore(bannerContainer, titleSection);
    }
})();

// Fun√ß√£o auxiliar para simular o clique nos bot√µes de categoria existentes
function triggerCategory(catName) {
    // Encontra o bot√£o correto baseado no texto do onclick original
    const buttons = document.querySelectorAll('.cat-btn');
    let targetBtn = null;

    buttons.forEach(btn => {
        if(btn.getAttribute('onclick').includes(`'${catName}'`)) {
            targetBtn = btn;
        }
    });

    if(targetBtn) {
        // Chama a fun√ß√£o original passando o bot√£o encontrado
        setCategory(catName, targetBtn);
        // Rola a p√°gina suavemente at√© os produtos
        document.getElementById('product-list').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}
</script>
<script>
/* =============================================================
   DESTAQUE "CHAMATIVO" DA JACA DURA
   Insere um banner animado logo abaixo do carrossel
   ============================================================= */

(function createJacaHighlight() {
    // 1. CSS DO DESTAQUE (Gradiente, Anima√ß√£o de Pulso e Sombra)
    const style = document.createElement('style');
    style.innerHTML = `
        @keyframes pulseBorder {
            0% { box-shadow: 0 0 0 0 rgba(255, 87, 34, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 87, 34, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 87, 34, 0); }
        }

        .jaca-highlight {
            background: linear-gradient(135deg, #ff5722, #ff9800);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            color: white;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            animation: pulseBorder 2s infinite; /* Efeito pulsante */
            transform: scale(1);
            transition: transform 0.2s;
        }

        .jaca-highlight:active { transform: scale(0.98); }

        /* C√≠rculo branco atr√°s da imagem */
        .jaca-img-container {
            width: 90px; height: 90px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center; justify-content: center;
            border: 3px solid #ffe0b2;
            flex-shrink: 0;
        }

        .jaca-img-highlight {
            width: 80px; height: 80px;
            border-radius: 50%;
            object-fit: cover;
        }

        .jaca-info h3 {
            margin: 0;
            font-size: 1.2rem;
            text-transform: uppercase;
            font-weight: 900;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            line-height: 1.1;
        }

        .jaca-tag {
            background: #fff;
            color: #d84315;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .jaca-btn {
            margin-top: 8px;
            background: #fff;
            color: #d84315;
            border: none;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        /* Brilho passando na tela */
        .shine {
            position: absolute;
            top: 0; left: -100%;
            width: 50%; height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
            transform: skewX(-25deg);
            animation: shineMove 3s infinite;
        }

        @keyframes shineMove {
            0% { left: -100%; }
            20% { left: 200%; }
            100% { left: 200%; }
        }
    `;
    document.head.appendChild(style);

    // 2. HTML DO CARD
    const highlightCard = document.createElement('div');
    highlightCard.className = 'jaca-highlight';
    // ID 1 √© a Jaca Dura Premium conforme seu c√≥digo
    highlightCard.setAttribute('onclick', 'openProduct(1)'); 
    
    highlightCard.innerHTML = `
        <div class="shine"></div>
        <div class="jaca-img-container">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRav5c9icx32NBrS6E--h_GOloEZH_vZcvOf4VTc_zLxEPDLGHzHbi3VOw&s=10" class="jaca-img-highlight">
        </div>
        <div class="jaca-info">
            <span class="jaca-tag">üî• A MAIS VENDIDA</span>
            <h3>Jaca Dura Premium</h3>
            <p style="font-size: 0.85rem; margin-top: 4px; opacity: 0.95;">Amarelinha, crocante e super doce. Chegou hoje!</p>
            <button class="jaca-btn">Pedir Agora üõí</button>
        </div>
    `;

    // 3. INSERIR NO LOCAL CORRETO
    // Tenta inserir logo ap√≥s o carrossel de banners criado no script anterior
    const bannerCarousel = document.querySelector('.banner-carousel');
    const mainContainer = document.querySelector('main.container');
    const sectionTitle = document.getElementById('section-title');

    if (bannerCarousel && bannerCarousel.parentNode) {
        // Se o banner existe, coloca DEPOIS dele
        bannerCarousel.parentNode.insertBefore(highlightCard, bannerCarousel.nextSibling);
    } else if (mainContainer && sectionTitle) {
        // Se n√£o tiver banner, coloca antes do t√≠tulo da lista
        mainContainer.insertBefore(highlightCard, sectionTitle);
    }
})();
</script>

</body>
</html>
